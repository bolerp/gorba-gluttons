# üóëÔ∏è Gorba-Gluttons Server

Backend –¥–ª—è –∏–≥—Ä—ã Gorba-Gluttons - –ø—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –Ω–∞ Node.js + Supabase.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ [supabase.com](https://supabase.com)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ SQL Editor 
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ —Ñ–∞–π–ª–∞ `supabase-schema.sql`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –ø—Ä–æ–µ–∫—Ç–∞ –∏ Service Role Key

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `env.example`:

```bash
cp env.example .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```env
PORT=3001
SUPABASE_URL=https://–≤–∞—à-–ø—Ä–æ–µ–∫—Ç.supabase.co
SUPABASE_SERVICE_KEY=–≤–∞—à-service-role-key
GORBAGANA_RPC_URL=https://rpc.gorbagana.wtf
TRASH_CAN_ADDRESS=–∞–¥—Ä–µ—Å-–º—É—Å–æ—Ä–Ω–æ–≥–æ-–∫–æ—à–µ–ª—å–∫–∞
FRONTEND_URL=http://localhost:3000
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
npm run dev
```

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
```bash
npm run build
npm start
```

## üì° API Endpoints

### –ë–∞–∑–æ–≤—ã–µ
- `GET /` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ
- `GET /api/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

### –ò–≥—Ä–æ–≤—ã–µ
- `GET /api/leaderboard` - –õ–∏–¥–µ—Ä–±–æ—Ä–¥
- `GET /api/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä—ã  
- `GET /api/player/:walletAddress` - –î–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞
- `POST /api/player` - –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞
- `POST /api/feed` - –ó–∞–ø–∏—Å–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –∫–æ—Ä–º–ª–µ–Ω–∏—è

## üõ† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ index.ts          # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ routes.ts         # API —Ä–æ—É—Ç—ã
‚îú‚îÄ‚îÄ supabase.ts       # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ types.ts          # TypeScript —Ç–∏–ø—ã (–±—É–¥—É—â–µ–µ)
```

## üìä –°–∏—Å—Ç–µ–º–∞ –æ—á–∫–æ–≤

**–§–æ—Ä–º—É–ª–∞ Stink Score:**
```
Stink = (–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π √ó 100) + (–û–±—ä–µ–º –≤ SOL √ó 1000)
```

**–ü—Ä–∏–º–µ—Ä:**
- 5 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ 0.1 SOL = (5 √ó 100) + (0.5 √ó 1000) = 1000 –æ—á–∫–æ–≤

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Row Level Security (RLS)
–í `supabase-schema.sql` –µ—Å—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –æ–Ω–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã, –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ - —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ.

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª `.env`! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ `env.example`.

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase
```bash
curl http://localhost:3001/api/health
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞
```bash
curl http://localhost:3001/api/leaderboard
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```bash
# –°–æ–∑–¥–∞—Ç—å –∏–≥—Ä–æ–∫–∞
curl -X POST http://localhost:3001/api/player \
  -H "Content-Type: application/json" \
  -d '{"walletAddress": "test123", "nickname": "TestPlayer"}'

# –ó–∞–ø–∏—Å–∞—Ç—å –∫–æ—Ä–º–ª–µ–Ω–∏–µ
curl -X POST http://localhost:3001/api/feed \
  -H "Content-Type: application/json" \
  -d '{"walletAddress": "test123", "transactionSignature": "sig123", "amountSol": 0.1}'
```

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ë–∞–∑–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
2. ‚úÖ Supabase –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è  
3. ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
4. üî≤ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
5. üî≤ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
6. üî≤ –ë–ª–æ–∫—á–µ–π–Ω –∏–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä
7. üî≤ Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üìù –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—É—é —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π —Ñ–∞–π–ª–æ–≤:

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- `LOG_LEVEL` - —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (error, warn, info, debug)
- `NODE_ENV` - —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã (development –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏)

### –§–∞–π–ª—ã –ª–æ–≥–æ–≤
- `logs/application-YYYY-MM-DD.log` - –≤—Å–µ –ª–æ–≥–∏ (–º–∞–∫—Å 5MB, 14 –¥–Ω–µ–π)
- `logs/error-YYYY-MM-DD.log` - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ (–º–∞–∫—Å 5MB, 30 –¥–Ω–µ–π)

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **ERROR** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, API)
- **WARN** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–∏—Å—á–µ—Ä–ø–∞–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤, –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏)
- **INFO** - –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, —Ä–µ—Ñ–∞–Ω–¥—ã, —Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞)
- **DEBUG** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π, –∫–æ—Ä–º–ª–µ–Ω–∏—è)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ç–∏–≤ —Å–ø–∞–º–∞
- –õ–∏–º–∏—Ç—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ (‚â§0.05 GOR, ‚â§2 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ª–∏–º–∏—Ç–∞—Ö –Ω–µ —á–∞—â–µ —Ä–∞–∑–∞ –≤ —á–∞—Å –Ω–∞ –∫–æ—à–µ–ª–µ–∫
- –ê–¥—Ä–µ—Å–∞ –∫–æ—à–µ–ª—å–∫–æ–≤ —Å–æ–∫—Ä–∞—â–µ–Ω—ã –¥–æ 8 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø–æ —Ä–∞–∑–º–µ—Ä—É (5MB) –∏ –≤—Ä–µ–º–µ–Ω–∏

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "Missing Supabase configuration"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `SUPABASE_URL` –∏ `SUPABASE_SERVICE_KEY` –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

### "Error fetching leaderboard" 
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ SQL —Å—Ö–µ–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤ Supabase
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `players` —Å–æ–∑–¥–∞–Ω–∞

### CORS –æ—à–∏–±–∫–∏
- –û–±–Ω–æ–≤–∏—Ç–µ `FRONTEND_URL` –≤ `.env`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É

---

üóëÔ∏è **–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º—É—Å–æ—Ä–Ω—É—é —ç–∫–æ—Å–∏—Å—Ç–µ–º—É Gorbagana!** 